<?php
$countryCodes = [
    "DZ (+213)",
    "AD (+376)",
    "AO (+244)",
    "AI (+1264)",
    "AG (+1268)",
    "AR (+54)",
    "AM (+374)",
    "AW (+297)",
    "AU (+61)",
    "AT (+43)",
    "AZ (+994)",
    "BS (+1242)",
    "BH (+973)",
    "BD (+880)",
    "BB (+1246)",
    "BY (+375)",
    "BE (+32)",
    "BZ (+501)",
    "BJ (+229)",
    "BM (+1441)",
    "BT (+975)",
    "BO (+591)",
    "BA (+387)",
    "BW (+267)",
    "BR (+55)",
    "BN (+673)",
    "BG (+359)",
    "BF (+226)",
    "BI (+257)",
    "KH (+855)",
    "CM (+237)",
    "CA (+1)",
    "CV (+238)",
    "KY (+1345)",
    "CF (+236)",
    "CL (+56)",
    "CN (+86)",
    "CO (+57)",
    "KM (+269)",
    "CG (+242)",
    "CK (+682)",
    "CR (+506)",
    "HR (+385)",
    "CU (+53)",
    "CY (+90392)",
    "CY (+357)",
    "CZ (+42)",
    "DK (+45)",
    "DJ (+253)",
    "DM (+1809)",
    "DO (+1809)",
    "EC (+593)",
    "EG (+20)",
    "SV (+503)",
    "GQ (+240)",
    "ER (+291)",
    "EE (+372)",
    "ET (+251)",
    "FK (+500)",
    "FO (+298)",
    "FJ (+679)",
    "FI (+358)",
    "FR (+33)",
    "GF (+594)",
    "PF (+689)",
    "GA (+241)",
    "GM (+220)",
    "GE (+7880)",
    "DE (+49)",
    "GH (+233)",
    "GI (+350)",
    "GR (+30)",
    "GL (+299)",
    "GD (+1473)",
    "GP (+590)",
    "GU (+671)",
    "GT (+502)",
    "GN (+224)",
    "GW (+245)",
    "GY (+592)",
    "HT (+509)",
    "HN (+504)",
    "HK (+852)",
    "HU (+36)",
    "IS (+354)",
    "IN (+91)",
    "ID (+62)",
    "IR (+98)",
    "IQ (+964)",
    "IE (+353)",
    "IL (+972)",
    "IT (+39)",
    "JM (+1876)",
    "JP (+81)",
    "JO (+962)",
    "KZ (+7)",
    "KE (+254)",
    "KI (+686)",
    "KP (+850)",
    "KR (+82)",
    "KW (+965)",
    "KG (+996)",
    "LA (+856)",
    "LV (+371)",
    "LB (+961)",
    "LS (+266)",
    "LR (+231)",
    "LY (+218)",
    "LI (+417)",
    "LT (+370)",
    "LU (+352)",
    "MO (+853)",
    "MK (+389)",
    "MG (+261)",
    "MW (+265)",
    "MY (+60)",
    "MV (+960)",
    "ML (+223)",
    "MT (+356)",
    "MH (+692)",
    "MQ (+596)",
    "MR (+222)",
    "YT (+269)",
    "MX (+52)",
    "FM (+691)",
    "MD (+373)",
    "MC (+377)",
    "MN (+976)",
    "MS (+1664)",
    "MA (+212)",
    "MZ (+258)",
    "MN (+95)",
    "NA (+264)",
    "NR (+674)",
    "NP (+977)",
    "NL (+31)",
    "NC (+687)",
    "NZ (+64)",
    "NI (+505)",
    "NE (+227)",
    "NG (+234)",
    "NU (+683)",
    "NF (+672)",
    "NP (+670)",
    "NO (+47)",
    "OM (+968)",
    "PW (+680)",
    "PA (+507)",
    "PG (+675)",
    "PY (+595)",
    "PE (+51)",
    "PH (+63)",
    "PL (+48)",
    "PT (+351)",
    "PR (+1787)",
    "QA (+974)",
    "RE (+262)",
    "RO (+40)",
    "RU (+7)",
    "RW (+250)",
    "SM (+378)",
    "ST (+239)",
    "SA (+966)",
    "SN (+221)",
    "CS (+381)",
    "SC (+248)",
    "SL (+232)",
    "SG (+65)",
    "SK (+421)",
    "SI (+386)",
    "SB (+677)",
    "SO (+252)",
    "ZA (+27)",
    "ES (+34)",
    "LK (+94)",
    "SH (+290)",
    "KN (+1869)",
    "SC (+1758)",
    "SD (+249)",
    "SR (+597)",
    "SZ (+268)",
    "SE (+46)",
    "CH (+41)",
    "SI (+963)",
    "TW (+886)",
    "TJ (+7)",
    "TH (+66)",
    "TG (+228)",
    "TO (+676)",
    "TT (+1868)",
    "TN (+216)",
    "TR (+90)",
    "TM (+7)",
    "TM (+993)",
    "TC (+1649)",
    "TV (+688)",
    "UG (+256)",
    "GB (+44)",
    "UA (+380)",
    "AE (+971)",
    "UY (+598)",
    "US (+1)",
    "UZ (+7)",
    "VU (+678)",
    "VA (+379)",
    "VE (+58)",
    "VN (+84)",
    "VG (+84)",
    "VI (+84)",
    "WF (+681)",
    "YE (+969)",
    "YE (+967)",
    "ZM (+260)",
    "ZW (+263)"
];
$animations['Attention seekers'] = ['bounce','flash','pulse','rubberBand','shakeX','shakeY','headShake','swing','tada','wobble','jello','heartBeat'];
$animations['Back entrances'] = ['backInDown','backInLeft','backInRight','backInUp'];
$animations['Back exits'] = ['backOutDown','backOutLeft','backOutRight','backOutUp'];
$animations['Bouncing entrances'] = ['backOutDown','backOutLeft','backOutRight','backOutUp'];  
$animations['Bouncing entrances'] = ['bounceIn', 'bounceInDown', 'bounceInLeft', 'bounceInRight', 'bounceInUp'];
$animations['Bouncing exits'] =['bounceOut', 'bounceOutDown', 'bounceOutLeft', 'bounceOutRight', 'bounceOutUp'];
$animations['Fading entrances'] = ['fadeIn', 'fadeInDown', 'fadeInDownBig', 'fadeInLeft', 'fadeInLeftBig', 'fadeInRight', 'fadeInRightBig', 'fadeInUp', 'fadeInUpBig', 'fadeInTopLeft', 'fadeInTopRight', 'fadeInBottomLeft', 'fadeInBottomRight'];
$animations['Fading exits'] = ['fadeOut', 'fadeOutDown', 'fadeOutDownBig', 'fadeOutLeft', 'fadeOutLeftBig', 'fadeOutRight', 'fadeOutRightBig', 'fadeOutUp', 'fadeOutUpBig', 'fadeOutTopLeft', 'fadeOutTopRight', 'fadeOutBottomRight', 'fadeOutBottomLeft'];
$animations['Flippers'] = ['flip', 'flipInX', 'flipInY', 'flipOutX', 'flipOutY'];
$animations['Lightspeed'] = ['lightSpeedInRight', 'lightSpeedInLeft', 'lightSpeedOutRight', 'lightSpeedOutLeft'];
$animations['Rotating entrances'] = ['rotateIn', 'rotateInDownLeft', 'rotateInDownRight', 'rotateInUpLeft', 'rotateInUpRight'];
$animations['Rotating exits'] = ['rotateOut', 'rotateOutDownLeft', 'rotateOutDownRight', 'rotateOutUpLeft', 'rotateOutUpRight'];
$animations['Specials'] = ['hinge', 'jackInTheBox', 'rollIn', 'rollOut'];
$animations['Zooming entrances'] = ['zoomIn', 'zoomInDown', 'zoomInLeft', 'zoomInRight', 'zoomInUp'];
$animations['Zooming exits'] = ['zoomOut', 'zoomOutDown', 'zoomOutLeft', 'zoomOutRight', 'zoomOutUp'];
$animations['Sliding entrances'] = ['slideInDown', 'slideInLeft', 'slideInRight', 'slideInUp'];
$animations['Sliding exits'] = ['slideOutDown', 'slideOutLeft', 'slideOutRight', 'slideOutUp'];

function mos_home_url_replace($data) {
    $replace_fnc = str_replace('home_url()', home_url(), $data);
    $replace_br = str_replace('{{home_url}}', home_url(), $replace_fnc);
    return $replace_br;
}
function mos_get_posts($post_type = 'post', $post_status = 'publish'){
    global $wpdb;
    $output = array();
    $all_posts = $wpdb->get_results( "SELECT * FROM {$wpdb->prefix}posts WHERE post_status = '{$post_status}' AND post_type = '{$post_type}'" );          
    foreach ($all_posts as $key => $value) {
        $output[$value->ID] = $value->post_title;
    }
    return $output;
}
//var_dump(mos_get_posts ('case-study'));

function mos_get_terms ($taxonomy = 'category', $return='all') {
    global $wpdb;
    $output = array();
    $all_taxonomies = $wpdb->get_results( "SELECT {$wpdb->prefix}term_taxonomy.term_id, {$wpdb->prefix}term_taxonomy.taxonomy, {$wpdb->prefix}terms.name, {$wpdb->prefix}terms.slug, {$wpdb->prefix}term_taxonomy.description, {$wpdb->prefix}term_taxonomy.parent, {$wpdb->prefix}term_taxonomy.count, {$wpdb->prefix}terms.term_group FROM {$wpdb->prefix}term_taxonomy INNER JOIN {$wpdb->prefix}terms ON {$wpdb->prefix}term_taxonomy.term_id={$wpdb->prefix}terms.term_id", ARRAY_A);
    if ($return=='all'){
        foreach ($all_taxonomies as $key => $value) {
            if ($value["taxonomy"] == $taxonomy) {
                $output[] = $value;
            }
        }
    } else {        
        foreach ($all_taxonomies as $key => $value) {
            if ($value["taxonomy"] == $taxonomy) {
                $output[$value['term_id']] = $value['name'];
            }
        }
    }
    return $output;
}
//var_dump(mos_get_terms ('case_study_category', 'small'));
function mos_calculate_reading_time( $post_id ) {

    $post_content       = get_post_field( 'post_content', $post_id );
    $stripped_content   = strip_shortcodes( $post_content );
    $strip_tags_content = wp_strip_all_tags( $stripped_content );
    $word_count         = count( preg_split( '/\s+/', $strip_tags_content ) );
    $reading_time       = ceil( $word_count / 220 );

    return $reading_time .' minutes of reading';
}
/*Variables*/
$template_parts = array(
    'Enabled'  => array(
        'content' => 'Content Section',
    ),
    'Disabled' => array(
        'banner' => 'Home Banner',
    ),
);
/*Variables*/

// Allow SVG
add_filter( 'wp_check_filetype_and_ext', function($data, $file, $filename, $mimes) {

  global $wp_version;
  if ( $wp_version !== '4.7.1' ) {
     return $data;
  }

  $filetype = wp_check_filetype( $filename, $mimes );

  return [
      'ext'             => $filetype['ext'],
      'type'            => $filetype['type'],
      'proper_filename' => $data['proper_filename']
  ];

}, 10, 4 );

function cc_mime_types( $mimes ){
  $mimes['svg'] = 'image/svg+xml';
  return $mimes;
}
add_filter( 'upload_mimes', 'cc_mime_types' );

function fix_svg() {
  echo '<style type="text/css">
        .attachment-266x266, .thumbnail img {
             width: 100% !important;
             height: auto !important;
        }
        </style>';
}
add_action( 'admin_head', 'fix_svg' );